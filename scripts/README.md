# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð´Ð»Ñ Ð¾Ñ†ÐµÐ½ÐºÐ¸ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸ÐºÐ°

ÐÐ°Ð±Ð¾Ñ€ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°, ÑÐ¸Ð½Ñ‚ÐµÐ·Ð° Ð°ÑƒÐ´Ð¸Ð¾, Ð¾Ñ†ÐµÐ½ÐºÐ¸ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð².

## ðŸ“‹ Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ

1. [Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°](#Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ-Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°)
2. [Ð¡Ð¸Ð½Ñ‚ÐµÐ· Ð°ÑƒÐ´Ð¸Ð¾](#ÑÐ¸Ð½Ñ‚ÐµÐ·-Ð°ÑƒÐ´Ð¸Ð¾)
3. [ÐžÑ†ÐµÐ½ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°](#Ð¾Ñ†ÐµÐ½ÐºÐ°-ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°)
4. [ÐÐ½Ð°Ð»Ð¸Ð· Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²](#Ð°Ð½Ð°Ð»Ð¸Ð·-Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²)
5. [ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½](#Ð¿Ð¾Ð»Ð½Ñ‹Ð¹-Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½)

---

## 1. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°

### ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ [`generate_dataset.py`](generate_dataset.py) ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ Ð´Ð»Ñ Ð¾Ñ†ÐµÐ½ÐºÐ¸ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸ÐºÐ°.

### ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸

- **89 ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²** Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
- **500-700 Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð²** Ñ Ð±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹ Ð¿Ð¾ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼
- **ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ** Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° (template_id, complexity, language)
- **Ð’Ð°Ñ€Ð¸Ð°Ñ†Ð¸Ð¸ Ð´Ð°Ñ‚**: Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ñ‹Ðµ, Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ, Ð´Ð½Ð¸ Ð½ÐµÐ´ÐµÐ»Ð¸
- **Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ** Ñ‡ÐµÑ€ÐµÐ· seed

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð‘Ð°Ð·Ð¾Ð²Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ (600 Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð²)
python scripts/generate_dataset.py

# Ð¡ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸
python scripts/generate_dataset.py \
    --output data/datasets \
    --filename evaluation_dataset.json \
    --count 600 \
    --seed 42
```

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ |
|----------|----------|--------------|
| `--output` | Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ | `data/datasets` |
| `--filename` | Ð˜Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð° | `evaluation_dataset.json` |
| `--count` | ÐžÐ±Ñ‰ÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð² | `600` |
| `--seed` | Seed Ð´Ð»Ñ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ | `42` |

### Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð²

| Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ | ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚ | ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð¾Ð² (Ð¸Ð· 600) |
|------------|---------|-------------------|
| flight_schedule | 30% | 180 |
| add_calendar_event | 15% | 90 |
| get_calendar_events | 15% | 90 |
| search_music | 15% | 90 |
| create_note | 7% | 42 |
| search_notes | 7% | 42 |
| no_tool_available | 11% | 66 |

### Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°

```json
[
  {
    "id": "flight_001",
    "text": "ÐÐ°Ð¹Ð´Ð¸ Ñ€ÐµÐ¹ÑÑ‹ Ð¸Ð· ÐœÐ¾ÑÐºÐ²Ñ‹ Ð² Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³ Ð½Ð° Ð·Ð°Ð²Ñ‚Ñ€Ð°",
    "tool": "flight_schedule",
    "params": {
      "from_city": "ÐœÐ¾ÑÐºÐ²Ð°",
      "to_city": "Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³",
      "date": "2026-02-03"
    },
    "metadata": {
      "template_id": "flight_template_01",
      "complexity": "simple",
      "language": "ru"
    }
  }
]
```

---

## 2. Ð¡Ð¸Ð½Ñ‚ÐµÐ· Ð°ÑƒÐ´Ð¸Ð¾

### ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ [`synthesize_audio.py`](synthesize_audio.py) Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð°ÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Qwen3-TTS.

### ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸

- **Qwen3-TTS**: Hugging Face Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð³Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°
- **Ð§ÐµÑ€ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²** Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ
- **Batch processing** Ð´Ð»Ñ ÑƒÑÐºÐ¾Ñ€ÐµÐ½Ð¸Ñ
- **ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº** Ñ retry Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð¡ Qwen3-TTS (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
python scripts/synthesize_audio.py \
    --input data/datasets/evaluation_dataset.json \
    --output data/datasets/audio \
    --model Qwen/Qwen3-TTS-12Hz-1.7B-VoiceDesign \
    --device cuda
```

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ                            |
|----------|----------|-----------------------------------------|
| `--input` | ÐŸÑƒÑ‚ÑŒ Ðº Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ñƒ | `data/datasets/evaluation_dataset.json` |
| `--output` | Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ð°ÑƒÐ´Ð¸Ð¾ | `data/datasets/audio`                   |
| `--model` | Ð˜Ð¼Ñ TTS Ð¼Ð¾Ð´ÐµÐ»Ð¸ | `Qwen/Qwen3-TTS-12Hz-1.7B-VoiceDesign`  |
| `--device` | Ð£ÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ (cuda/cpu) | ÐÐ²Ñ‚Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ                         |
| `--no-alternate-speakers` | ÐÐµ Ñ‡ÐµÑ€ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾Ð»Ð¾ÑÐ° | `False`                                 |

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

```bash
# Ð”Ð»Ñ Qwen3-TTS
pip install transformers torch qwen-tts
```

### Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð°Ð¹Ð»

Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚ `evaluation_dataset_with_audio.json` Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð»ÑÐ¼Ð¸:

```json
{
  "id": "flight_001",
  "text": "...",
  "audio_path": "data/datasets/audio/flight_001.wav",
  "audio_synthesized": true
}
```

---

## 3. ÐžÑ†ÐµÐ½ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°

### ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ [`evaluate.py`](evaluate.py) Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð¸ Ð°ÑƒÐ´Ð¸Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ñ…, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ñ€Ð°Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹.

### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸

**ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ:**
- **Precision** - Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
- **Recall** - Ð¿Ð¾Ð»Ð½Ð¾Ñ‚Ð° Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
- **F1-Score** - Ð³Ð°Ñ€Ð¼Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÑ€ÐµÐ´Ð½ÐµÐµ
- **False Alarm Rate (FAR)** - Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ð° Ð»Ð¾Ð¶Ð½Ñ‹Ñ… ÑÑ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ð¹
- **Parsable Tool Invocation Rate** - Ð´Ð¾Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ñ… Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²

**Ð Ð°Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹:**
- **Absolute Gap** - Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð°Ñ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð¼ÐµÐ¶Ð´Ñƒ Text Ð¸ Audio
- **Relative Gap** - Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…
- **Tool Agreement Rate** - Ð´Ð¾Ð»Ñ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
- **Degradation Rate** - Ð´Ð¾Ð»Ñ ÑƒÑ…ÑƒÐ´ÑˆÐµÐ½Ð¸Ð¹ Ð½Ð° Ð°ÑƒÐ´Ð¸Ð¾

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# ÐžÑ†ÐµÐ½ÐºÐ° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ðµ
python scripts/evaluate.py \
    --dataset data/datasets/evaluation_dataset.json \
    --modality text \
    --output data/results

# ÐžÑ†ÐµÐ½ÐºÐ° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð°ÑƒÐ´Ð¸Ð¾
python scripts/evaluate.py \
    --dataset data/datasets/evaluation_dataset_with_audio.json \
    --modality audio \
    --output data/results

# ÐžÑ†ÐµÐ½ÐºÐ° Ð½Ð° Ð¾Ð±ÐµÐ¸Ñ… Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑÑ… + Ð°Ð½Ð°Ð»Ð¸Ð· Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ð°
python scripts/evaluate.py \
    --dataset data/datasets/evaluation_dataset_with_audio.json \
    --modality both \
    --output data/results
```

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ |
|----------|----------|--------------|
| `--dataset` | ÐŸÑƒÑ‚ÑŒ Ðº Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ñƒ | `data/datasets/evaluation_dataset_with_audio.json` |
| `--modality` | ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ (text/audio/both) | `both` |
| `--output` | Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² | `None` (Ð°Ð²Ñ‚Ð¾) |

### Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

```
data/results/
â”œâ”€â”€ text_results.json       # Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ðµ
â”œâ”€â”€ audio_results.json      # Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð½Ð° Ð°ÑƒÐ´Ð¸Ð¾
â”œâ”€â”€ text_metrics.json       # ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ðµ
â”œâ”€â”€ audio_metrics.json      # ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð½Ð° Ð°ÑƒÐ´Ð¸Ð¾
â””â”€â”€ modality_gap.json       # ÐÐ½Ð°Ð»Ð¸Ð· Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ð° Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹
```

---

## 4. ÐÐ½Ð°Ð»Ð¸Ð· Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²

### ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ [`analyze_results.py`](analyze_results.py) ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¸ HTML Ð¾Ñ‚Ñ‡ÐµÑ‚ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¼ÐµÑ‚Ñ€Ð¸Ðº Ð¾Ñ†ÐµÐ½ÐºÐ¸.

### ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸

- **4 Ñ‚Ð¸Ð¿Ð° Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¾Ð²**: ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ‚Ñ€Ð¸Ðº, Ñ€Ð°Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹, Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ, Ð¾Ð±Ñ‰ÐµÐµ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ
- **HTML Ð¾Ñ‚Ñ‡ÐµÑ‚** Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¼Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ð¼Ð¸
- **Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ†Ð¸Ñ** ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð¼ÐµÑ‚Ñ€Ð¸Ðº
- **Ð’Ñ‹ÑÐ¾ÐºÐ¾Ðµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ** Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¾Ð² (300 DPI)

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
python scripts/analyze_results.py \
    --text-metrics data/results/text_metrics.json \
    --audio-metrics data/results/audio_metrics.json \
    --gap-metrics data/results/modality_gap.json \
    --output data/results
```

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ |
|----------|----------|--------------|
| `--text-metrics` | ÐŸÑƒÑ‚ÑŒ Ðº Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ°Ð¼ Ð½Ð° Ñ‚ÐµÐºÑÑ‚Ðµ | Ð”Ð° |
| `--audio-metrics` | ÐŸÑƒÑ‚ÑŒ Ðº Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ°Ð¼ Ð½Ð° Ð°ÑƒÐ´Ð¸Ð¾ | ÐÐµÑ‚ |
| `--gap-metrics` | ÐŸÑƒÑ‚ÑŒ Ðº Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ°Ð¼ Ñ€Ð°Ð·Ñ€Ñ‹Ð²Ð° | ÐÐµÑ‚ |
| `--output` | Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² | ÐÐµÑ‚ (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ `data/results`) |

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

```bash
pip install matplotlib
```

### Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

```
data/results/
â”œâ”€â”€ plots/
â”‚   â”œâ”€â”€ overall_comparison.png      # ÐžÐ±Ñ‰ÐµÐµ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ
â”‚   â”œâ”€â”€ per_tool_performance.png    # ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼
â”‚   â”œâ”€â”€ metrics_comparison.png      # Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ‚Ñ€Ð¸Ðº Text vs Audio
â”‚   â””â”€â”€ modality_gap.png            # Ð Ð°Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹
â””â”€â”€ report.html                     # HTML Ð¾Ñ‚Ñ‡ÐµÑ‚
```

---

## 5. ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½

### ÐŸÐ¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ

```bash
# Ð¨Ð°Ð³ 1: Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°
python scripts/generate_dataset.py \
    --count 600 \
    --seed 42

# Ð¨Ð°Ð³ 2: Ð¡Ð¸Ð½Ñ‚ÐµÐ· Ð°ÑƒÐ´Ð¸Ð¾
python scripts/synthesize_audio.py \
    --input data/datasets/evaluation_dataset.json \
    --output data/datasets/audio \
    --device cuda

# Ð¨Ð°Ð³ 3: ÐžÑ†ÐµÐ½ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°
python scripts/evaluate.py \
    --dataset data/datasets/evaluation_dataset_with_audio.json \
    --modality both \
    --output data/results

# Ð¨Ð°Ð³ 4: ÐÐ½Ð°Ð»Ð¸Ð· Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
python scripts/analyze_results.py \
    --text-metrics data/results/text_metrics.json \
    --audio-metrics data/results/audio_metrics.json \
    --gap-metrics data/results/modality_gap.json \
    --output data/results
```

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Makefile

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² [`Makefile`](../Makefile):

```makefile
# Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚Ð°
.PHONY: generate-dataset
generate-dataset:
	python scripts/generate_dataset.py --count 600 --seed 42

# Ð¡Ð¸Ð½Ñ‚ÐµÐ· Ð°ÑƒÐ´Ð¸Ð¾
.PHONY: synthesize-audio
synthesize-audio:
	python scripts/synthesize_audio.py \
		--input data/datasets/evaluation_dataset.json \
		--output data/datasets/audio \
		--device cuda

# ÐžÑ†ÐµÐ½ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°
.PHONY: evaluate
evaluate:
	python scripts/evaluate.py \
		--dataset data/datasets/evaluation_dataset_with_audio.json \
		--modality both \
		--output data/results

# ÐÐ½Ð°Ð»Ð¸Ð· Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
.PHONY: analyze
analyze:
	python scripts/analyze_results.py \
		--text-metrics data/results/text_metrics.json \
		--audio-metrics data/results/audio_metrics.json \
		--gap-metrics data/results/modality_gap.json \
		--output data/results

# ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½
.PHONY: full-evaluation
full-evaluation: generate-dataset synthesize-audio evaluate analyze
	@echo "âœ“ ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¾Ñ†ÐµÐ½ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!"
```

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½
make full-evaluation

# Ð˜Ð»Ð¸ Ð¿Ð¾ ÑˆÐ°Ð³Ð°Ð¼
make generate-dataset
make synthesize-audio
make evaluate
make analyze
```

---

## ðŸ“Š ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹

### Ð¦ÐµÐ»ÐµÐ²Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸

| ÐœÐµÑ‚Ñ€Ð¸ÐºÐ° | Ð¢ÐµÐºÑÑ‚ | ÐÑƒÐ´Ð¸Ð¾ | Ð Ð°Ð·Ñ€Ñ‹Ð² |
|---------|-------|-------|--------|
| Precision | >0.90 | >0.80 | <0.10 |
| Recall | >0.90 | >0.80 | <0.10 |
| F1-Score | >0.90 | >0.80 | <0.10 |
| FAR | <0.05 | <0.10 | <0.05 |
| Accuracy | >0.90 | >0.80 | <0.10 |
| Parsable Rate | >0.95 | >0.90 | <0.05 |

### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²

```
data/
â”œâ”€â”€ datasets/
â”‚   â”œâ”€â”€ evaluation_dataset.json              # Ð˜ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ Ð´Ð°Ñ‚Ð°ÑÐµÑ‚
â”‚   â”œâ”€â”€ evaluation_dataset_with_audio.json   # Ð”Ð°Ñ‚Ð°ÑÐµÑ‚ Ñ Ð°ÑƒÐ´Ð¸Ð¾
â”‚   â””â”€â”€ audio/                               # ÐÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð»Ñ‹
â”‚       â”œâ”€â”€ flight_001.wav
â”‚       â”œâ”€â”€ flight_002.wav
â”‚       â””â”€â”€ ...
â””â”€â”€ results/
    â”œâ”€â”€ text_results.json                    # Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (Ñ‚ÐµÐºÑÑ‚)
    â”œâ”€â”€ audio_results.json                   # Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (Ð°ÑƒÐ´Ð¸Ð¾)
    â”œâ”€â”€ text_metrics.json                    # ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ (Ñ‚ÐµÐºÑÑ‚)
    â”œâ”€â”€ audio_metrics.json                   # ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ (Ð°ÑƒÐ´Ð¸Ð¾)
    â”œâ”€â”€ modality_gap.json                    # Ð Ð°Ð·Ñ€Ñ‹Ð² Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹
    â”œâ”€â”€ report.html                          # HTML Ð¾Ñ‚Ñ‡ÐµÑ‚
    â””â”€â”€ plots/                               # Ð“Ñ€Ð°Ñ„Ð¸ÐºÐ¸
        â”œâ”€â”€ overall_comparison.png
        â”œâ”€â”€ per_tool_performance.png
        â”œâ”€â”€ metrics_comparison.png
        â””â”€â”€ modality_gap.png
```

---

## ðŸ”§ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ð°Ð¼ÑÑ‚Ð¸ GPU

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ CPU
python scripts/synthesize_audio.py --device cpu

# Ð˜Ð»Ð¸ ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚Ðµ batch size
python scripts/synthesize_audio.py --batch-size 1
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð”Ð¾Ð»Ð³Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð²
python scripts/generate_dataset.py --count 200

# Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ GPU Ð´Ð»Ñ ÑÐ¸Ð½Ñ‚ÐµÐ·Ð°
python scripts/synthesize_audio.py --device cuda
```

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ

- **Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°**: [`README.md`](../README.md)
- **ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ**: [`rules.yaml`](../rules.yaml)

---

## ðŸ¤ Ð’ÐºÐ»Ð°Ð´

ÐŸÑ€Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²:

1. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²
2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐµÐ¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐºÐ¾Ñ€Ñ (ANCHOR/END)
3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ Ð² ÑÑ‚Ð¾Ñ‚ README
4. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Makefile Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸

---

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: Ð’ÑÐµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ ÑÐµÐ¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐºÐ¾Ñ€Ñ ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ [`rules.yaml`](../rules.yaml) Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ ÐºÐ¾Ð´Ð°.
